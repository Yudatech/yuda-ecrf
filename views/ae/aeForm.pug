extends ../caseLayout

include ../mixins/_formTemplate
include ../mixins/_questionBtn

block case-content
  .case-content
    form.form-horizontal(id="ae-form" action=`/ae/${caseId}/${aeId || ''}` method="POST")
      - const formDisabled = !((locals.case.status === 'open' && locals.user.role === 'cra') || locals.user.role === 'admin')
      fieldset(disabled=formDisabled)
        legend #{config.subtitles.subtitle_1.text}

        .row
          .col-sm-10
            +_formTemplate(config.formConfigs.aeorigion)
          .col-sm-2
            +_questionBtn(config.formConfigs.aeorigion, questionFields)

        - config.formConfigs.aeorigion_1.hidden = !(config.formConfigs.aeorigion.value === 'other')
        .row
          .col-sm-10
            +_formTemplate(config.formConfigs.aeorigion_1)
          .col-sm-2
            +_questionBtn(config.formConfigs.aeorigion_1, questionFields)

        .row
          .col-sm-10
            +_formTemplate(config.formConfigs.event)
          .col-sm-2
            +_questionBtn(config.formConfigs.event, questionFields)

        .row
          .col-sm-10
            +_formTemplate(config.formConfigs.aestdtc)
          .col-sm-2
            +_questionBtn(config.formConfigs.aestdtc, questionFields)

        .row
          .col-sm-10
            +_formTemplate(config.formConfigs.aeeddtc)
          .col-sm-2
            +_questionBtn(config.formConfigs.aeeddtc, questionFields)

      fieldset(disabled=formDisabled)
        legend #{config.subtitles.subtitle_2.text}
        .row
          .col-sm-10
            +_formTemplate(config.formConfigs.aeserv)
          .col-sm-2
            +_questionBtn(config.formConfigs.aeserv, questionFields)

        .row
          .col-sm-10
            .form-group
              +_formTemplate(config.formConfigs.aeact)
          .col-sm-2
            +_questionBtn(config.formConfigs.aeact, questionFields)

        .row
          .col-sm-10
            .form-group
              +_formTemplate(config.formConfigs.aerpt)
          .col-sm-2
            +_questionBtn(config.formConfigs.aerpt, questionFields)

      fieldset(disabled=formDisabled)
        legend #{config.subtitles.subtitle_3.text}
        .row
          .col-sm-10
            +_formTemplate(config.formConfigs.aerel)
          .col-sm-2
            +_questionBtn(config.formConfigs.aerel, questionFields)

        .row
          .col-sm-10
            +_formTemplate(config.formConfigs.aeres_1)
          .col-sm-2
            +_questionBtn(config.formConfigs.aeres_1, questionFields)

        - config.formConfigs.aeres_2.hidden = !(config.formConfigs.aeres_1.value === 0)
        .row
          .col-sm-10
            .form-group
              +_formTemplate(config.formConfigs.aeres_2)
          .col-sm-2
            +_questionBtn(config.formConfigs.aeres_2, questionFields)

      fieldset(disabled=formDisabled)
        legend #{config.subtitles.subtitle_1.text}
        .row
          .col-sm-10
            .form-group
                +_formTemplate(config.formConfigs.aesae)
          .col-sm-2
            +_questionBtn(config.formConfigs.aesae, questionFields)

        .row
          .col-sm-10
            .form-group
              +_formTemplate(config.formConfigs.aedevicedft)
          .col-sm-2
            +_questionBtn(config.formConfigs.aedevicedft, questionFields)

        .row
          .col-sm-10
            .form-group
              +_formTemplate(config.formConfigs.aediscon)
          .col-sm-2
            +_questionBtn(config.formConfigs.aediscon, questionFields)

      .row.hidden(id="ae-error-1")
        .col-sm-12
          .alert.alert-warning(role="alert")
            span #{config.errors.error_1.text}

      if formDisabled === false
        input.btn.btn.btn-default.yuda-input-btn(type="submit" value=buttonConfig.buttons.save.text)
